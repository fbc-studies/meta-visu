!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){function n(e,t){return e.name<t.name?-1:e.name>t.name?1:0}function r(e){return e.registers.sort((e,t)=>n(e,t)),e.registers.forEach(e=>e.categories.sort((e,t)=>n(e,t))),e}async function a(e){return fetch(e).then(e=>e.json()).then(e=>e)}async function s(e,t=[]){let n=await a(`data/${e}`);const s=n.registers.filter(e=>!t.includes(e.name));n.registers=s;const i=100*function(e){let t=0;return e.registers.forEach(e=>e.categories.forEach(e=>t+=1)),t}(n=r(n)),c={width:450,height:i,posX:125,posY:50,childrenNames:["registers","categories"],animationDuration:750,nodeSize:7.5},o=d3.select(`body>div[data-filename="${e}"]`).append("svg").attr("data-filename",e).attr("height",i+100).attr("width",1050).attr("class","timeline-tree js-timeline-tree"),l=new TreeChart(n,o,c);l.updateNodes(),l.updateLinks();const d={width:250,height:100,showXAxis:!1,showLegend:!1,scaleStartDate:new Date("1950-1-1")};l.treeData.children.forEach((e,t)=>{e.children.forEach((n,r)=>{let a=d;t===l.treeData.children.length-1&&r===e.children.length-1&&(a={...d,showXAxis:!0,showLegend:!0});const s=function(e,t,n){let r=e;return r=[{type:"parents",data:r.filter(e=>e.parents)},{type:"subjects",data:r.filter(e=>!e.parents)}],new CategoryTimeline(r,t,n)}(n.data.samplings,o,a);s.moveTo(n.y+300,n.x+12.5),s.update()})})}function i(e){const t=document.querySelector(`.js-timeline-tree[data-filename="${e}"]`);t&&t.remove()}async function c(e,t){let n=await a(`data/${t}`);n=r(n);const c=document.createElement("ul");c.classList.add("register-selector"),n.registers.forEach(e=>{const n=`${t}/${e.name}`,r=document.createElement("li");r.classList.add("register__item"),r.innerHTML=`<input class="js-register-select" type="checkbox" id="${n}" \n    data-identifier="${n}" checked/>\n    <label for="${n}">${e.name}</label>`,c.appendChild(r)}),e.appendChild(c),function(e){e.querySelectorAll(".js-register-select").forEach(t=>{t.addEventListener("change",()=>{const n=t.dataset.identifier.split("/")[0],r=[...e.querySelectorAll(".js-register-select")].filter(e=>!e.checked).map(e=>e.dataset.identifier.split("/")[1]);i(n),s(n,r)})})}(c)}function o(){document.querySelectorAll(".js-btn").forEach(e=>{e.addEventListener("click",()=>{const{filename:t}=e.dataset;[...e.classList].includes("btn--selected")?(i(t),function(e){e.querySelector(".register-selector").classList.add("vanish")}(e.parentElement),e.classList.remove("btn--selected")):(e.classList.add("btn--selected"),s(t),async function(e,t){const n=e.querySelector(".register-selector");null===n?c(e,t):n.classList.remove("vanish")}(e.parentElement,t))})})}!async function(){const e=await a("data/filenames.json");e.sort(),function(e){e.forEach(e=>{const t=document.createElement("div");t.classList.add("timeline-tree-wrapper"),t.dataset.filename=e,document.querySelector("body").appendChild(t)})}(e),function(e){e.map(e=>e.split(".")[0]).sort().forEach(e=>{const t=document.createElement("li");t.classList.add("nav__item"),t.innerHTML=`<button class="btn js-btn" data-filename="${e}.json">${e}</button>`,document.querySelector(".js-nav-list").appendChild(t)})}(e),o(),document.querySelector(".js-show-menu").addEventListener("click",()=>{document.querySelector(".js-nav-menu").classList.remove("hidden")}),document.querySelector(".js-hide-menu").addEventListener("click",()=>{document.querySelector(".js-nav-menu").classList.add("hidden")}),document.querySelector('.js-btn[data-filename="National Institute for Health and Welfare.json"]').click(),document.querySelector(".js-show-menu").click()}()}]);